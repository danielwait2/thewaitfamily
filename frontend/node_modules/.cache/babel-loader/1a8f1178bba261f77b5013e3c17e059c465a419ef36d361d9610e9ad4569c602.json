{"ast":null,"code":"import _regeneratorRuntime from\"/Users/danielwait/homeserver/thewaitfamilysite/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/danielwait/homeserver/thewaitfamilysite/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/danielwait/homeserver/thewaitfamilysite/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import apiClient from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getYouTubeEmbedUrl=function getYouTubeEmbedUrl(url){if(!url){return\"\";}try{var parsed=new URL(url);var host=parsed.hostname.replace(\"www.\",\"\");if(host===\"youtu.be\"){var videoId=parsed.pathname.replace(\"/\",\"\");return\"https://www.youtube.com/embed/\".concat(videoId);}if(host===\"youtube.com\"||host===\"m.youtube.com\"){if(parsed.pathname.startsWith(\"/embed/\")){return url;}var _videoId=parsed.searchParams.get(\"v\");if(_videoId){return\"https://www.youtube.com/embed/\".concat(_videoId);}}}catch(error){return url;}return url;};var FamilyStoriesPage=function FamilyStoriesPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),stories=_useState2[0],setStories=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchStories=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$apiClient$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return apiClient.get(\"/family-stories\");case 4:_yield$apiClient$get=_context.sent;data=_yield$apiClient$get.data;setStories(data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setError(\"We couldn't load the family stories. Please try again.\");case 12:_context.prev=12;setLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,9,12,15]]);}));return function fetchStories(){return _ref.apply(this,arguments);};}();fetchStories();},[]);return/*#__PURE__*/_jsxs(\"section\",{className:\"stories-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stories-hero\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tagline\",children:\"Family history archive\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Stories that shaped the Wait family\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Pour a cup of coffee, gather the family, and enjoy these treasured memories told in the voices of the people who lived them.\"})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"status\",children:\"Loading family stories...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"status error\",children:error}):stories.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"status\",children:\"No stories yet. Check back soon for new memories.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"story-grid\",children:stories.map(function(story){return/*#__PURE__*/_jsxs(\"article\",{className:\"story-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"story-video\",children:/*#__PURE__*/_jsx(\"iframe\",{src:getYouTubeEmbedUrl(story.videoUrl),title:story.title,allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true,loading:\"lazy\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"story-body\",children:[/*#__PURE__*/_jsx(\"h3\",{children:story.title}),story.description&&/*#__PURE__*/_jsx(\"p\",{children:story.description})]})]},story.id);})})]});};export default FamilyStoriesPage;","map":{"version":3,"names":["React","useEffect","useState","apiClient","jsx","_jsx","jsxs","_jsxs","getYouTubeEmbedUrl","url","parsed","URL","host","hostname","replace","videoId","pathname","concat","startsWith","searchParams","get","error","FamilyStoriesPage","_useState","_useState2","_slicedToArray","stories","setStories","_useState3","_useState4","loading","setLoading","_useState5","_useState6","setError","fetchStories","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$apiClient$get","data","wrap","_callee$","_context","prev","next","sent","t0","finish","stop","apply","arguments","className","children","length","map","story","src","videoUrl","title","allow","allowFullScreen","description","id"],"sources":["/Users/danielwait/homeserver/thewaitfamilysite/frontend/src/pages/FamilyStoriesPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport apiClient from \"../api\";\n\nconst getYouTubeEmbedUrl = (url) => {\n  if (!url) {\n    return \"\";\n  }\n  try {\n    const parsed = new URL(url);\n    const host = parsed.hostname.replace(\"www.\", \"\");\n    if (host === \"youtu.be\") {\n      const videoId = parsed.pathname.replace(\"/\", \"\");\n      return `https://www.youtube.com/embed/${videoId}`;\n    }\n    if (host === \"youtube.com\" || host === \"m.youtube.com\") {\n      if (parsed.pathname.startsWith(\"/embed/\")) {\n        return url;\n      }\n      const videoId = parsed.searchParams.get(\"v\");\n      if (videoId) {\n        return `https://www.youtube.com/embed/${videoId}`;\n      }\n    }\n  } catch (error) {\n    return url;\n  }\n  return url;\n};\n\nconst FamilyStoriesPage = () => {\n  const [stories, setStories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    const fetchStories = async () => {\n      try {\n        setLoading(true);\n        const { data } = await apiClient.get(\"/family-stories\");\n        setStories(data);\n      } catch (err) {\n        setError(\"We couldn't load the family stories. Please try again.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStories();\n  }, []);\n\n  return (\n    <section className=\"stories-section\">\n      <div className=\"stories-hero\">\n        <span className=\"tagline\">Family history archive</span>\n        <h1>Stories that shaped the Wait family</h1>\n        <p>\n          Pour a cup of coffee, gather the family, and enjoy these treasured memories told in the\n          voices of the people who lived them.\n        </p>\n      </div>\n\n      {loading ? (\n        <p className=\"status\">Loading family stories...</p>\n      ) : error ? (\n        <p className=\"status error\">{error}</p>\n      ) : stories.length === 0 ? (\n        <p className=\"status\">No stories yet. Check back soon for new memories.</p>\n      ) : (\n        <div className=\"story-grid\">\n          {stories.map((story) => (\n            <article key={story.id} className=\"story-card\">\n              <div className=\"story-video\">\n                <iframe\n                  src={getYouTubeEmbedUrl(story.videoUrl)}\n                  title={story.title}\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  allowFullScreen\n                  loading=\"lazy\"\n                />\n              </div>\n              <div className=\"story-body\">\n                <h3>{story.title}</h3>\n                {story.description && <p>{story.description}</p>}\n              </div>\n            </article>\n          ))}\n        </div>\n      )}\n    </section>\n  );\n};\n\nexport default FamilyStoriesPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}