{"ast":null,"code":"import axios from\"axios\";export var API_BASE_URL=process.env.REACT_APP_API_URL||\"http://localhost:3000/api\";var apiClient=axios.create({baseURL:API_BASE_URL,headers:{\"Content-Type\":\"application/json\"}});var authToken=null;export var setAuthToken=function setAuthToken(token){authToken=token;if(token){apiClient.defaults.headers.common.Authorization=\"Bearer \".concat(token);}else{delete apiClient.defaults.headers.common.Authorization;}};export var getAuthToken=function getAuthToken(){return authToken;};if(typeof window!==\"undefined\"){var storedToken=window.localStorage.getItem(\"adminToken\");if(storedToken){setAuthToken(storedToken);}}apiClient.interceptors.response.use(function(response){return response;},function(error){var _error$response;if(typeof window!==\"undefined\"&&((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401&&window.localStorage.getItem(\"adminToken\")){window.localStorage.removeItem(\"adminToken\");setAuthToken(null);}return Promise.reject(error);});export default apiClient;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","authToken","setAuthToken","token","defaults","common","Authorization","concat","getAuthToken","window","storedToken","localStorage","getItem","interceptors","response","use","error","_error$response","status","removeItem","Promise","reject"],"sources":["/Users/danielwait/homeserver/thewaitfamilysite/frontend/src/api.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:3000/api\";\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nlet authToken = null;\n\nexport const setAuthToken = (token) => {\n  authToken = token;\n  if (token) {\n    apiClient.defaults.headers.common.Authorization = `Bearer ${token}`;\n  } else {\n    delete apiClient.defaults.headers.common.Authorization;\n  }\n};\n\nexport const getAuthToken = () => authToken;\n\nif (typeof window !== \"undefined\") {\n  const storedToken = window.localStorage.getItem(\"adminToken\");\n  if (storedToken) {\n    setAuthToken(storedToken);\n  }\n}\n\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (\n      typeof window !== \"undefined\" &&\n      error.response?.status === 401 &&\n      window.localStorage.getItem(\"adminToken\")\n    ) {\n      window.localStorage.removeItem(\"adminToken\");\n      setAuthToken(null);\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default apiClient;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,MAAO,IAAM,CAAAC,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,2BAA2B,CAExF,GAAM,CAAAC,SAAS,CAAGL,KAAK,CAACM,MAAM,CAAC,CAC7BC,OAAO,CAAEN,YAAY,CACrBO,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,GAAI,CAAAC,SAAS,CAAG,IAAI,CAEpB,MAAO,IAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CACrCF,SAAS,CAAGE,KAAK,CACjB,GAAIA,KAAK,CAAE,CACTN,SAAS,CAACO,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAACC,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CACrE,CAAC,IAAM,CACL,MAAO,CAAAN,SAAS,CAACO,QAAQ,CAACJ,OAAO,CAACK,MAAM,CAACC,aAAa,CACxD,CACF,CAAC,CAED,MAAO,IAAM,CAAAE,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,QAAS,CAAAP,SAAS,GAE3C,GAAI,MAAO,CAAAQ,MAAM,GAAK,WAAW,CAAE,CACjC,GAAM,CAAAC,WAAW,CAAGD,MAAM,CAACE,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAC7D,GAAIF,WAAW,CAAE,CACfR,YAAY,CAACQ,WAAW,CAAC,CAC3B,CACF,CAEAb,SAAS,CAACgB,YAAY,CAACC,QAAQ,CAACC,GAAG,CACjC,SAACD,QAAQ,QAAK,CAAAA,QAAQ,GACtB,SAACE,KAAK,CAAK,KAAAC,eAAA,CACT,GACE,MAAO,CAAAR,MAAM,GAAK,WAAW,EAC7B,EAAAQ,eAAA,CAAAD,KAAK,CAACF,QAAQ,UAAAG,eAAA,iBAAdA,eAAA,CAAgBC,MAAM,IAAK,GAAG,EAC9BT,MAAM,CAACE,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CACzC,CACAH,MAAM,CAACE,YAAY,CAACQ,UAAU,CAAC,YAAY,CAAC,CAC5CjB,YAAY,CAAC,IAAI,CAAC,CACpB,CACA,MAAO,CAAAkB,OAAO,CAACC,MAAM,CAACL,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,cAAe,CAAAnB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}